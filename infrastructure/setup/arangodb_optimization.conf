# ArangoDB Configuration for Single Collection Optimization
# Place this file in /etc/arangodb3/arangodb.conf.local or merge with existing config

[server]
# Utilize available CPU cores
threads = 16

[rocksdb]
# Write optimization settings
write-buffer-size = 134217728  # 128MB per buffer
max-write-buffer-number = 4     # 4 buffers = 512MB total
max-background-jobs = 8         # Parallel compaction jobs
compaction-read-ahead-size = 2097152  # 2MB read-ahead

# Additional performance settings
max-bytes-for-level-base = 268435456  # 256MB
max-bytes-for-level-multiplier = 10
level-compaction-dynamic-level-bytes = true

# Disable unnecessary features for write performance
enable-statistics = false

[cache]
# Cache for working set (adjust based on available RAM)
size = 8589934592  # 8GB

[wal]
# Write-ahead log settings
sync-interval = 100  # Sync every 100ms
throttle-when-pending = 0  # Disable throttling

[query]
# Query performance
memory-limit = 8589934592  # 8GB for queries

# Installation instructions:
# 1. Stop ArangoDB: sudo systemctl stop arangodb3
# 2. Backup existing config: sudo cp /etc/arangodb3/arangodb.conf /etc/arangodb3/arangodb.conf.backup
# 3. Apply settings: sudo cp arangodb_optimization.conf /etc/arangodb3/arangodb.conf.local
# 4. Start ArangoDB: sudo systemctl start arangodb3
# 5. Verify: sudo systemctl status arangodb3